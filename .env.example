# =============================================================================
# ADAPT Platform - Environment Configuration
# =============================================================================
# Copy this file to .env and fill in your actual values
# NEVER commit .env to version control!

# =============================================================================
# DATABASE CONFIGURATION (Required)
# =============================================================================
# PostgreSQL connection string from Supabase
# Get from: Supabase Dashboard → Settings → Database → Connection string (URI)
DATABASE_URL=postgresql://postgres:password@localhost:5432/postgres?sslmode=require

# =============================================================================
# SUPABASE CONFIGURATION (Required)
# =============================================================================
# Get from: Supabase Dashboard → Settings → API

# Supabase Project URL
DATABASE_FILE_STORAGE_URL=https://your-project-ref.supabase.co

# Supabase Service Role Key (for server-side operations)
DATABASE_FILE_STORAGE_KEY=your-service-role-key

# Supabase Anon Key (for JWT authentication validation)
SUPABASE_ANON_KEY=your-anon-key

# Frontend Supabase Config (VITE_ prefix required for client-side access)
# These are the same values as above, exposed to the browser
VITE_SUPABASE_URL=https://your-project-ref.supabase.co
VITE_SUPABASE_ANON_KEY=your-anon-key

# =============================================================================
# SESSION CONFIGURATION (Required)
# =============================================================================
# Random secret for Express session encryption (min 16 characters)
# Generate with: openssl rand -base64 32
SESSION_SECRET=your-random-secret-here-change-in-production

# Cookie security settings
# Set to 'false' for local HTTP development (Docker without HTTPS)
# Set to 'true' in production with HTTPS (Vercel)
COOKIE_SECURE=false

# =============================================================================
# APPLICATION CONFIGURATION (Required)
# =============================================================================
# Application URL for email verification links
# IMPORTANT: 
# - Development (local): http://localhost:5000
# - Development (tunnel): https://your-tunnel-url.ngrok.io
# - Production: https://your-domain.vercel.app
# NEVER use localhost in production - email links won't work!
APP_URL=http://localhost:5000

# =============================================================================
# AI SERVICE - YANDEX CLOUD (Required)
# =============================================================================
# Yandex Cloud API credentials for course generation
YANDEX_CLOUD_API_KEY=your-yandex-api-key
YANDEX_CLOUD_PROJECT_FOLDER_ID=your-yandex-folder-id
YANDEX_CLOUD_BASE_URL=https://rest-assistant.api.cloud.yandex.net/v1
YANDEX_PROMPT_ID=your-yandex-prompt-id
YANDEX_TIMEOUT_MS=90000

# =============================================================================
# EMAIL CONFIGURATION - SMTP (Required)
# =============================================================================
# SMTP server settings for sending emails
# For Yandex SMTP:
#   - Host: smtp.yandex.ru
#   - Port: 465 (SSL) or 587 (STARTTLS)
#   - User: Your Yandex email (e.g., adapt-ai@yandex.com)
#   - Password: APP PASSWORD from Yandex ID (NOT your regular password)
#   - From: Display name and email (e.g., "ADAPT <adapt-ai@yandex.com>")
# To generate APP PASSWORD: https://id.yandex.ru/security → App passwords
SMTP_HOST=smtp.yandex.ru
SMTP_PORT=465
SMTP_USER=adapt-ai@yandex.com
SMTP_PASSWORD=your-app-password
SMTP_FROM=ADAPT <adapt-ai@yandex.com>

# =============================================================================
# SERVER CONFIGURATION (Optional)
# =============================================================================
NODE_ENV=development
PORT=5000
HOST=0.0.0.0
LOG_LEVEL=info
LOG_PRETTY=true
SHUTDOWN_TIMEOUT_MS=10000
REQUEST_LOG_SAMPLE=1

# =============================================================================
# CONTACT INFORMATION (Optional)
# =============================================================================
OWNER_TELEGRAM=@YourTelegramHandle

# =============================================================================
# VERCEL DEPLOYMENT NOTES
# =============================================================================
# When deploying to Vercel:
# 1. Add all variables above (except VITE_*) to Vercel Environment Variables
# 2. Set APP_URL to your production domain (e.g., https://adapt.vercel.app)
# 3. Set COOKIE_SECURE=true
# 4. Set NODE_ENV=production (auto-set by Vercel)
# 5. VITE_* variables are bundled during build, set them in Vercel too
#
# Required for Vercel:
# - DATABASE_URL
# - DATABASE_FILE_STORAGE_URL
# - DATABASE_FILE_STORAGE_KEY
# - SUPABASE_ANON_KEY
# - SESSION_SECRET
# - APP_URL (production domain)
# - YANDEX_CLOUD_API_KEY
# - YANDEX_CLOUD_PROJECT_FOLDER_ID
# - YANDEX_PROMPT_ID
# - SMTP_HOST, SMTP_PORT, SMTP_USER, SMTP_PASSWORD, SMTP_FROM
# - VITE_SUPABASE_URL
# - VITE_SUPABASE_ANON_KEY
# =============================================================================
